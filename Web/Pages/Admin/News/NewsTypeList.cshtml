@page
@model NewsTypeListModel
@{
	Layout = "~/Pages/Admin/_Layout.cshtml";
	ViewData["Title"] = "分类列表";
}
<div class="row _content" id="app">
	<div class="col-xs-12">
		<div class="row _search">
			<form class="form-horizontal">
				<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
					<div class="form-group form-group-sm">
						<label for="firstname" class="col-sm-4 col-xs-3 control-label">名称</label>
						<div class="col-sm-8 col-xs-9">
							<input type="text" class="form-control" v-model="filter.nt_name" placeholder="请输入名字">
						</div>
					</div>
				</div>
				<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
					<div class="form-group form-group-sm">
						<label for="firstname" class="col-sm-4 col-xs-3 control-label">父类型</label>
						<div class="col-sm-8 col-xs-9">
							<select class="form-control" v-model="filter.nt_pid">
								<option value="">--请选择--</option>
							</select>
						</div>
					</div>
				</div>
				<div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
					<div class="form-group form-group-sm">
						<label for="firstname" class="col-sm-4 col-xs-3 control-label">审核</label>
						<div class="col-sm-8 col-xs-9">
							<select class="form-control" v-model="filter.nt_examine">
								<option value="">--请选择--</option>
								<option value="1">是</option>
								<option value="0">否</option>
							</select>
						</div>
					</div>
				</div>
				<div class="col-xs-12 text-right">
					<div class="form-group">
						<div class="col-xs-12">
							<button type="button" class="btn btn-primary btn-sm" v-on:click="search">搜索按钮</button>
						</div>
					</div>
				</div>
			</form>
		</div>
	</div>
	<div class="col-xs-12" id="variable_area">
		<div class="row _tablelist">
			<div class="col-xs-12 _list">
				<div class="_box">
					<table class="table table-striped">
						<thead>
							<tr>
								<th style="width:60px;">编号</th>
								<th style="width:auto;">名称</th>
								<th style="width:150px;">父类型</th>
								<th style="width:60px;">排序</th>
								<th style="width:60px;">审核</th>
								<th style="width:120px;">操作</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td>Tanmay</td>
								<td>BangaloreBangaloreBangaloreBangalore</td>
								<td>560001</td>
								<td>2</td>
								<td>3</td>
								<td><a href="#">修改</a> | <a href="#">删除</a></td>
							</tr>
							<tr>
								<td>Tanmay</td>
								<td>BangaloreBangaloreBangaloreBangalore</td>
								<td>560001</td>
								<td>2</td>
								<td>3</td>
								<td><a href="#">修改</a> | <a href="#">删除</a></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
			<table-pages v-bind:action="filter" v-on:pagechange="search()"></table-pages>
		</div>
	</div>

	<modal-loading></modal-loading>
	<modal-alert></modal-alert>
</div>

<script>
	const router = new VueRouter()
	var vm = new Vue({
		router: router,
		el: '#app',
		data: {
			filter: {
				page: 1,
				limit: 25,
				total: 10,
				nt_name: "",
				nt_examine: "",
				nt_pid:""
			}
		},
		mounted: function ()
		{
			setTimeout(this.pageLoad, 100);
		},
		watch: {
			$route: "pageLoad"
		},
		methods: {
			pageLoad: function (to, from)
			{
				if (!static.isEmptyJson(this.$route.query))
				{
					this.filter = static.CopyRouteQuery(this.$route.query);
				}
				//读取数据
				static.loading("show");
				$.ajax({
					type: "post",
					url: "?handler=GetNewsTypeList",
					data: vm.filter,
					success: function (res)
					{
						var json = eval("(" + res + ")");
						if (json.error)
						{
							static.alert(json.error);
						}
						else
						{
							vm.list = json.list;
						}
						static.loading("hide")
					}
				});
			},
			search: function ()
			{
				router.push({ query: vm.filter })
			}
		}
	});


</script>